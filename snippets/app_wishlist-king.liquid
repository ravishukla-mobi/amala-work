<link rel="stylesheet" href="{{ 'app_wishlist-king_templates.css' | asset_url }}" />

<style>
  .wk-link {
    font-weight: var(--text-font-bolder-weight);
    font-size: calc(var(--base-text-font-size) - (var(--default-text-font-size) - 16px));
    margin-left: 35px;
    padding-right: 35px;
    position: relative;
  }

  .wk-link::after {
    position: absolute;
    content: "";
    right: 0;
    top: calc(50% - 17px);
    background: var(--header-border-color);
    height: 34px;
    width: 1px;
  }

  .wk-link__icon {
    margin-right: 24px;
  }

  .wk-link__label {
    display: none;
  }

  .wk-link--filled .wk-icon__svg {
    fill: transparent;
  }

  .wk-link__count {
    position: absolute;
    top: -4px;
    left: 18px;
    height: 20px;
    line-height: 20px;
    vertical-align: middle;
    border-radius: 10px;
    min-width: 20px;
    padding: 0 4px;
    font-size: calc(var(--base-text-font-size) - (var(--default-text-font-size) - 12px));
    font-weight: var(--text-font-bolder-weight);
    text-align: center;
    background: var(--header-accent-color);
    color: var(--secondary-background);
  }

  @media screen and (max-width: 999px) {
    .wk-link {
      margin-left: 9px;
      margin-right: 5px;
      padding-right: 0;
    }

    .wk-link::after {
      display: none;
    }

    .wk-link__label {
      display: none;
    }

    .wk-link__icon {
      margin-right: 8px;
    }

    .wk-link__count {
      top: -8px;
      left: 18px;
    }
  }

  .wk-button {
    margin-top: 1em;
  }

  .wk-button__icon {
    top: -1px;
  }

  .wk-button__label {}

  .cart--button__row .wk-button {
    margin: 0;
    margin-right: 10px;
  }

  .cart--button__row .wk-button__label {
    display: none;
  }

  .wk-button.wk-button--floating {
    top: 14px;
    right: 22px;
  }

  .wk-page:not(.wk-page--shared) .wk-button.wk-button--floating {
    top: 15px;
    right: 15px;
  }

  .wk-product-form__submit {
    border-radius: 2px;
    text-align: center;
    line-height: 42px;
    padding: 0 10px;
    font-weight: var(--text-font-bolder-weight);
    font-size: calc(var(--base-text-font-size) - (var(--default-text-font-size) - 14px));
    background: #fff;
    border: 1px solid #999;
    border-radius: 2px;
    font-size: 12px;
    padding: 0 10px;
    color: #222;
    font-weight: 500;
    font-family: Poppins, sans-serif;
  }

  .wk-product-title {
    line-height: 1.55;
    color: var(--heading-color);
    font-weight: var(--text-font-bolder-weight);
    font-size: calc(var(--base-text-font-size) - (var(--default-text-font-size) - 14px));
  }

  .wk-product-price {
    margin-top: 5px;
    margin-bottom: 5px;
    font-size: calc(var(--base-text-font-size) - (var(--default-text-font-size) - 20px));
    color: var(--accent-color);
  }

  .wk-product--sale .wk-product-price--current {
    margin-right: .7em;
    color: var(--product-on-sale-accent);
  }

  .wk-product-price--compare {
    color: var(--text-color);
    text-decoration: line-through;
    text-decoration-color: rgba(var(--text-color-rgb),0.7);
    font-size: calc(var(--base-text-font-size) - (var(--default-text-font-size) - 14px));
  }

  .wk-product-vendor {
    line-height: 1.55;
    text-transform: uppercase;
    margin-bottom: 3px;
    font-size: calc(var(--base-text-font-size) - (var(--default-text-font-size) - 12px));
  }

  .wk-sharing {
    margin-bottom: 3em;
  }

  .wk-page {
    max-width: 1480px;
    margin-left: auto;
    margin-right: auto;
    padding: 0 var(--mobile-container-gutter);
  }
  
  .cart--button__row .wk-button-collection .wk-label {
    display: none;
  }

  @media screen and (min-width: 641px) {
    .wk-page {
      padding: 0 var(--desktop-container-gutter);
    }
  }

  .wk-grid__item {
    padding: 8px;
    border: 1px solid var(--border-color);
    border-radius: 10px;
  }

  .wk-product-image {
    border-radius: 10px;
  }

  .wk-product-title {
    font-size: 16px;
    color: black;
    font-weight: 500;
    line-height: 1.55;
  }

  .wk-product-vendor {
    font-size: 12px;
    color: var(--text-color);
    line-height: 1.55;
  }

  .wk-product-price {
    color: #945539;
    font-family: Libre Baskerville,serif;
    font-size: 22px;
    font-weight: 400;
  }

  :root {
    --wk-icon--stroke-width: 1.8px;

    --wk-link--color: currentColor;
    --wk-link__icon--size: 22px;

    --wk-button--color: currentColor;
    --wk-button__icon--color: rgb(148 85 57 / 75%);
    --wk-button__icon--size: 16px;

    --wk-product-form__submit--background: white;
    --wk-product-form__submit--color: currentColor;

    --wk-share-button--color: white;
    --wk-share-button--background: #3d3d3d;
    --wk-share-button--size: 26px;

    --wk-page__image--aspect-ratio: 1 / 1;
    --wk-page__grid--max-columns: 4;
  }

  .product-form__payment-container .wk-button button.wk-button .wk-icon {
    width: 20px !important;
    height: 17px !important;
  }
  
  .product-form__payment-container {
    display: flex;
    margin-top:25px;
    justify-content: space-between;
  }
  
  .product-form__payment-container .wk-button {
    position: relative  !important;
    opacity: 1 !important;
    top: 0 !important;
    padding: 0 !important;
    background: var(--white-color) !important;
    border-radius: 10px !important;
    border: solid 0px var(--button-border-color) !important;
    height: 54px !important;
    line-height: 40px !important;
    width: 54px !important;
    max-width: 100% !important;
    margin-right: 0px !important;
    min-width: 54px !important;
    margin:0 !important;
  }

  .product-form__payment-container .wk-button .wk-icon{
    width: 28px !important;
    height: 22px !important;
    position: absolute !important;
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
  }
  
  .product-form__payment-container .wk-button .wk-icon svg{
    max-width: 28px !important;
  }

  .product-form__payment-container .wk-label, .product-form__payment-container .wk-button__label {
    display: none !important;
  }

  @media (max-width: 640px) {
    .sticky-on-mobile .wk-button {
      position: relative !important;
      opacity: 1!important !important;
      top: 0 !important;
      padding: 0 !important;
      background: var(--white-color) !important;
      border-radius: 10px !important;
      height: 54px !important;
      line-height: 40px !important;
      width: 54px!important;
      max-width: 100% !important;
      margin-right: 0 !important;
      min-width: 54px !important;
      margin: 0 0 0 0!important;
    }
    .sticky-on-mobile .wk-button .wk-icon{
      width: 28px !important;
      height: 22px !important;
      position: absolute !important;
      left: 50% !important;
      top: 50% !important;
      transform: translate(-50%, -50%) !important;
    }
    
    .sticky-on-mobile .wk-button .wk-icon svg{
      max-width: 28px !important;
    }

    .sticky-on-mobile .wk-label, .sticky-on-mobile .wk-button__label {
      display: none !important;
    }
  }

.remove-block button.wk-button {
    margin: 0 !important;
    font-size: 14px;
    font-weight: normal;
    line-height: normal;
    color: var(--black-color);
    text-transform: capitalize;
}

.remove-block button.wk-button span.wk-label {
  text-transform: none;
  font-size: 14px;
  top: -1px;
  position: relative;
}

.remove-block button.wk-button:hover span {
   color: var(--brand-color);
}

.remove-block .wk-button:after, .qnty-bottom .wk-button:after {
    content: '';
    display: inline-block;
    margin-left: 12px;
    width: 1px;
    background: var(--border-color);
    height: 14px;
    position: relative;
    border-radius: 2px;
}

.remove-block button.wk-button span.wk-label {
    top: 0px;
}

.wishlist-cartpage button.wk-button {
    margin: 0 !important;
    font-size: 14px;
    font-weight: normal;
    line-height: normal;
    color: var(--black-color);
    text-transform: capitalize;
}

.wishlist-cartpage button.wk-button span.wk-label {
  text-transform: none;
  font-size: 14px;
  top: -1px;
  position: relative;
}

.wishlist-cartpage button.wk-button:hover span {
   color: var(--brand-color);
}

.wishlist-cartpage .wk-button:after, .qnty-bottom .wk-button:after {
    content: '';
    display: inline-block;
    margin-left: 12px;
    width: 1px;
    background: var(--border-color);
    height: 14px;
    position: relative;
    border-radius: 2px;
}

.wishlist-cartpage button.wk-button span.wk-label {
    top: 0px;
}

.wishlist-cartpage button.wk-button {
    margin: 0 12px 0 0!important;
}
</style>

<script type="module">
  import WishlistKing from "{{ 'app_wishlist-king_sdk.js' | asset_url }}";
  import templates from "{{ 'app_wishlist-king_templates.js' | asset_url }}";
  import settings from "{{ 'app_wishlist-king_settings.js' | asset_url }}";

  // Uncomment this line to use WishlistKing in third party scripts
  // window.WishlistKing = WishlistKing;

  WishlistKing.toolkit.init({
    templates,
    settings,
    events: {
      ready() {
        // App is ready and WishlistKing.toolkit can be used
      },
      addedToCart(product) {
        // This is a good place to trigger AJAX cart update
        window.scrollTo(0, 0);
        location.reload();
      },
      loginRequired(intent) {
        window.location = [
          "/account/login?wk-redirect=",
          encodeURIComponent(
            JSON.stringify({
              path: window.location.pathname,
              intent: intent,
            })
          ),
        ].join("");
      },
    },
    shop: {
      name: {{ shop.name | replace: "&amp;", "&" | json }},
      domain: "{{ shop.domain }}",
      permanent_domain: "{{ shop.permanent_domain }}",
      currency: "{{ shop.currency }}",
      money_format: {{ shop.money_format | json }},
      root_url: "{% unless routes.root_url == '/'  %}{{ routes.root_url }}{% endunless %}",
    },
    session: {
      customer: {{ customer.id | json }},
      customer_email: {{ customer.email | json }},
    },
    wishlist: {
      filter: function (product) {
        return !product.hidden;
      },
      share: {
        title: {{ "app_wishlist-king.general.share_list_title" | t | json }},
        description: {{ "app_wishlist-king.general.share_list_description" | t: shopName: shop.name | json }},
      },
    },
    theme: {
      locale: {
        wishlist: {{ "app_wishlist-king.general.wishlist" | t | json }},
        wishlist_empty_note: {{ "app_wishlist-king.general.wishlist_empty_note" | t | json }},
        add_to_wishlist: {{ "app_wishlist-king.general.add_to_wishlist" | t | json }},
        remove_from_wishlist: {{ "app_wishlist-king.general.remove_from_wishlist" | t | json }},
        clear_wishlist: {{ "app_wishlist-king.general.clear_wishlist" | t | json }},
        in_wishlist: {{ "app_wishlist-king.general.in_wishlist" | t | json }},
        share_wishlist: {{ "app_wishlist-king.general.share_wishlist" | t | json }},
        copy_share_link: {{ "app_wishlist-king.general.copy_share_link" | t | json }},
        share_link_copied: {{ "app_wishlist-king.general.share_link_copied" | t | json }},
        share_by_email_body: {{ "app_wishlist-king.general.share_by_email_body" | t | json }},
        login_or_signup_note: {{ "app_wishlist-king.general.login_or_signup_note_html" | t: login_url: routes.account_login_url, register_url: routes.account_register_url | json }},
        add_to_cart: {{ "app_wishlist-king.general.add_to_cart" | t | json }},
        sold_out: {{ "app_wishlist-king.general.sold_out" | t | json }},
        quantity: {{ "app_wishlist-king.general.quantity" | t | json }},
        view_product: {{ "app_wishlist-king.general.view_product" | t | json }},
        view_wishlist: {{ "app_wishlist-king.general.view_wishlist" | t | json }},
        share_on_facebook: {{ "app_wishlist-king.general.share_on_facebook" | t | json }},
        share_on_twitter: {{ "app_wishlist-king.general.share_on_twitter" | t | json }},
        share_on_pinterest: {{ "app_wishlist-king.general.share_on_pinterest" | t | json }},
        share_with_whatsapp: {{ "app_wishlist-king.general.share_with_whatsapp" | t | json }},
        share_by_email: {{ "app_wishlist-king.general.share_by_email" | t | json }},
        get_link: {{ "app_wishlist-king.general.get_link" | t | json }},
        send_to_customer_service: {{ "app_wishlist-king.general.send_to_customer_service" | t | json }},
      },
      customer: {{ customer.id | json }},
      customer_accounts_enabled: {{ shop.customer_accounts_enabled | json }},
    },
  });

  // Header link
  WishlistKing.observe(
    {
      selector: ".header__action-item--cart",
    },
    (target) => {
      target.insertBefore(WishlistKing.createComponent("wishlist-link"));
    }
  );

  // Wishlist button on product page
  WishlistKing.observe(
    {
      selector: "form[action='{{ routes.cart_add_url }}']:not(.product-quick_view-form) .product-form__payment-container button[data-action='add-to-cart']",
      template: "product",
    },
    (target) => {
      target.insertBefore(
        WishlistKing.createComponent("wishlist-button", {
          id: "{{ product.id }}",
        })
      );
    }
  );

  WishlistKing.observe(
    {
      selector: "form.product-quick_view-form .product-form__payment-container button[data-action='add-to-cart']",
      template: "product",
    },
    (target) => {
      target.insertBefore(
        WishlistKing.createComponent("wishlist-button", {
          id: target.container.getAttribute("data-product-id"),
        })
      );
    }
  );

  WishlistKing.observe(
    {
      selector: ".wishlist-minicart",
    },
    (target) => {
      target.append(
        WishlistKing.createComponent("wishlist-button", {
          id: target.container.getAttribute("data-product-id"),
        })
      );
    }
  );

  WishlistKing.observe(
    {
      selector: ".combo-wishlist",
    },
    (target) => {
      target.append(
        WishlistKing.createComponent("wishlist-button", {
          id: target.container.getAttribute("data-product-id"),
        })
      );
    }
  );

  WishlistKing.observe(
    {
      selector: ".wishlist-cartpage",
    },
    (target) => {
      target.append(
        WishlistKing.createComponent("wishlist-button", {
          id: target.container.getAttribute("data-product-id"),
        })
      );
    }
  );

  WishlistKing.observe(
    {
      selector: ".wishlist-sticky",
      template: "product",
    },
    (target) => {
      target.append(
        WishlistKing.createComponent("wishlist-button", {
          id: "{{ product.id }}",
        })
      );
    }
  );

  // Wishlist button on collection page
  WishlistKing.observe(
    {
      selector: ".product-item[data-product-id]",
    },
    (target) => {
      target.find(".cart--button__row").prepend(
        WishlistKing.createComponent("wishlist-button", {
          id: target.container.getAttribute("data-product-id"),
        })
      );
    }
  );

  WishlistKing.observe(
    {
      selector: ".st-product[data-product-id]",
    },
    (target) => {
      target.find(".cart--button__row").prepend(
        WishlistKing.createComponent("wishlist-button", {
          id: target.container.getAttribute("data-product-id"),
        })
      );
    }
  );

  // Wishlist page
  WishlistKing.observe(
    {
      selector: "#main",
      template: "page",
      handle: WishlistKing.toolkit.settings.wishlistPageHandle,
    },
    (target) => {
      target.append(WishlistKing.createComponent("wishlist-page"));
    }
  );

  // Shared wishlist page
  WishlistKing.observe(
    {
      selector: "#main",
      template: "page",
      handle: WishlistKing.toolkit.settings.sharedWishlistPageHandle,
    },
    (target) => {
      target.append(WishlistKing.createComponent("wishlist-page-shared"));
    }
  );
</script>
